<app-header></app-header>>

<main class="page-wrapper">
    <app-sidebar></app-sidebar>

    <section class="inner-wrapper">
        <div class="col-sm-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h1>Teachers | Total: {{total}} | Email Sent: {{sendMailCount}} | SMS Sent: {{smsCount}}</h1>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="back-search">
                                <input type="text" id="f_name" placeholder="Search By Name" class="form-control filter_input" >
                                <input type="text" id="f_email" placeholder="Search By Email" class="form-control filter_input" >
                                <input type="text" id="f_phone" placeholder="Search By Phone" class="form-control filter_input" >
                                <select id="f_profile_image" class="form-control filter_input">
                                    <option value="">Profile Pic</option>
                                    <option value="1">Yes</option>
                                    <option value="2">No</option>
                                </select>
                                <select id="f_email_exist" class="form-control filter_input">
                                    <option value="">Email</option>
                                    <option value="1">Yes</option>
                                    <option value="2">No</option>
                                </select>
                                <select class="form-control filter_input" id="f_class">
                                    <option value="">Select Class</option>
                                    <option *ngFor="let class of classes" value="{{ class.id }}">{{ class.title }}</option>
                                    </select>
                                    <select class="form-control filter_input" id="f_subjects">
                                    <option value="">Select Subject</option>
                                    <option *ngFor="let subject of subjects" value="{{ subject.id }}">{{ subject.title }}</option>
                                    </select>
                                    <select class="form-control filter_input" id="f_board">
                                    <option value="">Select Board</option>
                                    <option *ngFor="let board of boards" value="{{ board.id }}">{{ board.title }}</option>
                                    </select>
                                    <select class="form-control filter_input" id="state_id" (change)="getCitiies()">
                                        <option value="">Select State</option>
                                        <option *ngFor="let state of stateList" id="{{state.id}}" value="{{ state.id }}">{{ state.state }}</option>
                                    </select>
                                    <select class="form-control filter_input" id="city_id">
                                        <option value="">Select City</option>
                                        <option *ngFor="let city of cityList" value="{{ city.id }}">{{ city.title }}</option>
                                    </select>
                                    
                                    <input type="text" id="f_address" placeholder="Search By Address" class="form-control filter_input" >
                                
                                
                            </div>
                        </div>
                    </div>
                    <div class="row" style="margin-top:10px">
                        <div class="col-md-12">
                            <div class="back-search">
                                <select id="f_beneficiary_id" class="form-control filter_input">
                                    <option value="">Beneficiary</option>
                                    <option value="1">Yes</option>
                                    <option value="2">No</option>
                                </select>
                                <select id="f_gender" class="form-control filter_input">
                                    <option value="">Gender</option>
                                    <option value="1">Male</option>
                                    <option value="2">Female</option>
                                </select>
                                <input type="text" id="f_rating" placeholder="Rating" class="form-control filter_input" >
                                <select id="f_home_location" class="form-control filter_input">
                                    <option value="">Home Location</option>
                                    <option value="1">Yes</option>
                                    <option value="2">No</option>
                                </select>
                                <a (click)="searchData()" id="searchBtn" style="margin-right:10px;" class="btn btn-info">Search</a>
                                <a (click)="reset()" id="searchBtn" style="margin-right:10px;" class="btn btn-info">Reset</a>
                                <a *ngIf="login_user_type == 'Admin' || export_p == 'YES'"  (click)="exportCSV()" id="exportBtn" style="margin-right:10px;"  class="btn btn-info">Export CSV</a>
                                <a *ngIf="login_user_type == 'Admin' || import_p == 'YES'" style="margin-right:5px;" data-toggle="modal" data-target="#importModal" class="btn btn-info">Bulk Update</a> 
                                <a *ngIf="login_user_type == 'Admin' || add_p == 'YES'" routerLink="/add-teacher"  class="btn btn-info">Add Teacher</a>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 text-right">
                            <div class="paging_bootstrap pagination">

                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="table-responsive widthFixed">
                                <table class="table table-bordered">
                                    <thead>
                                        <tr>
                                            <th width="62px">S No.</th>
                                            <th *ngIf="login_user_type == 'Admin'" width="62px">DB ID</th>
                                            <th width="183px">Profile Image</th>
                                            <th width="142px">Name</th>
                                            <th *ngIf="login_user_type == 'Admin'" width="183px">Email Address</th>
                                            <th width="120px">Mobile</th>
                                            <th *ngIf="login_user_type == 'Admin'" width="120px">Location</th>
                                            <th *ngIf="login_user_type == 'Admin'" width="72px">Status</th>
                                            <th *ngIf="login_user_type == 'Admin'" width="72px">Approved</th>
                                            <th *ngIf="login_user_type == 'Admin' || edit_p == 'YES' || delete_p == 'YES'" width="153px">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let user of users | paginate: { itemsPerPage: 10, currentPage: p, totalItems: total }; let i = index" [attr.data-index]="i" class="odd">
                                            <td>{{ i+1 }}.</td>
                                            <td *ngIf="login_user_type == 'Admin'">{{ user.id }}</td>
                                            <td><a *ngIf="user.profile_image" target="_blank" href="{{SiteUrl}}storage/users/{{user.profile_image}}"><img   src="{{SiteUrl}}storage/users/{{user.profile_image}}" style="width: 70px;" /></a>
                                              <img  *ngIf="!user.profile_image" src="assets/images/avatar-pic.jpg" style="width: 70px;" /></td>
                                            <td onmousedown="return false" onselectstart="return false">{{ user.name }}<br><b>Experience:</b> {{ user.teaching_exp }}<br><b>Rating:</b> {{ user.rating }}
                                                <br><b>Home Location Verified:</b> {{ user.verify_home_location }}
                                            </td>
                                            <td *ngIf="login_user_type == 'Admin'"><a data-toggle="modal" data-target="#basicModal" style="cursor:pointer" (click)="getTeacherBalance(user.id)">{{ user.email }}</a></td>
                                            <td onmousedown="return false" onselectstart="return false" >{{ user.phone }}</td>
                                            <td *ngIf="login_user_type == 'Admin'">Dymanic: {{ user.current_latitude }} | {{ user.current_longitude }}<br>Home: {{ user.lat }} | {{ user.lng }}</td>
                                            <td *ngIf="login_user_type == 'Admin'">
                                                <a style="cursor:pointer" (click)="updateStatus(user.id,'2')" *ngIf="user.status == 1" class="btn-round active"><img src="assets/images/right-tick.png"></a>
                                                <a style="cursor:pointer" (click)="updateStatus(user.id,'1')" *ngIf="user.status == 2" class="btn-round"><img src="assets/images/cross-icon.png"></a>
                                            </td>
                                            <td *ngIf="login_user_type == 'Admin'">
                                                <a style="cursor:pointer" (click)="updateApproveStatus(user.id,'2')" *ngIf="user.approved == 1" class="btn-round active"><img src="assets/images/right-tick.png"></a>
                                                <a style="cursor:pointer" (click)="updateApproveStatus(user.id,'1')" *ngIf="user.approved == 2" class="btn-round"><img src="assets/images/cross-icon.png"></a>
                                            </td>
                                            <td >
                                                <a *ngIf="login_user_type == 'Admin'" [routerLink]="['/teacher-addresses/', user.id  ]" class="action-btn" title="Manage Address"><span><img src="assets/images/customer-login.png" height="58"></span></a>
                                                <a *ngIf="login_user_type == 'Admin' || edit_p == 'YES'" [routerLink]="['/edit-teacher/', user.id  ]" class="action-btn" title="Edit"><span><img src="assets/images/edit-icon.png" height="58"></span></a>
                                                <a *ngIf="login_user_type == 'Admin'" target="_blank" [routerLink]="['/payouts/', user.id  ]" class="action-btn" title="View Payout"><span><img src="assets/images/payment-configration.png" height="55" style="margin-top: 2px;;"></span></a>
                                                <!-- <a *ngIf="login_user_type == 'Admin'" [routerLink]="['/teacher-exam/', user.id  ]" class="action-btn" title="View Exam"><span><img src="assets/images/quiz-question.png" height="55" style="margin-top: 2px;;"></span></a> -->
                                                <a *ngIf="login_user_type == 'Admin' || delete_p == 'YES'" style="cursor:pointer" (click)="deleteUser(user.id)" class="action-btn" title="Delete"><span><img src="assets/images/delete-icon.png"></span></a>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 text-right bottom-paging">
                            <div class="paging_bootstrap pagination">
                                <pagination-controls (pageChange)="pageChangeEvent($event)"></pagination-controls>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <div class="modal fade" id="basicModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title" id="modalHeading">Teacher balance Summary</h4>
            </div>
            <div class="modal-body">
              <div>
                <div class="row">
                    
                    <div class="col-sm-6 form-group balance_summary">
                        Wallet Balance: 0
                    </div>

                    <div class="col-sm-6 form-group balance_summary">
                        Total Classes: {{totalClasses}}
                    </div>

                    <div class="col-sm-6 form-group balance_summary">
                        Today Earning: {{oneDayEarning}} INR
                    </div>

                    <div class="col-sm-6 form-group balance_summary">
                        Month Earning: {{monthlyEarning}} INR
                    </div>
                    
                    <div class="col-sm-6 form-group balance_summary">
                        Total Earning: {{totalEarning}} INR
                    </div>
                    
                </div>
                <hr>
                <div class="row">
                    
                    <div class="col-sm-6 form-group balance_summary">
                        Payout Done: {{total_pay}}
                    </div>

                    <div class="col-sm-6 form-group balance_summary">
                        Payout Pending: {{pending_pay}}
                    </div>
                    
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" id="popCloseBtn" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>
      <div class="modal fade" id="importModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title" id="modalHeading">Bulk Update</h4>
            </div>
            <div class="modal-body">
              <div>
                <div class="row">
                    <div class="col-sm-12 form-group">
                        <label>Choose CSV File <sup>*</sup></label>
                        <input type="file" id="file" class="form-control">
                    </div>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              <a (click)="uploadData()" id="uploadBtn" class="btn btn-primary">Upload</a>
            </div>
          </div>
        </div>
      </div>
</main>

<app-footer></app-footer>
